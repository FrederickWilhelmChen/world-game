# Game é¡¹ç›®æ–‡ä»¶ç»“æ„è¯´æ˜

## é¡¹ç›®æ¦‚è§ˆ

è¿™æ˜¯ä¸€ä¸ªGrand Strategyæ¸¸æˆdemoé¡¹ç›®ï¼Œé‡‡ç”¨React + TypeScript + Viteæ„å»ºã€‚æ•´ä¸ªé¡¹ç›®å®ç°äº†ä¸€ä¸ªèåˆé’¢é“é›„å¿ƒå’Œç»´å¤šåˆ©äºšé£æ ¼çš„æˆ˜ç•¥æ¸¸æˆã€‚

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
game/
â”œâ”€â”€ src/                      # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ main.tsx             # åº”ç”¨å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ App.tsx              # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ App.css              # åº”ç”¨æ ·å¼
â”‚   â”œâ”€â”€ types.ts             # TypeScriptç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ gameData.ts          # æ¸¸æˆåˆå§‹æ•°æ®
â”‚   â””â”€â”€ gameEngine.ts        # æ¸¸æˆå¼•æ“æ ¸å¿ƒé€»è¾‘
â”œâ”€â”€ index.html               # HTMLå…¥å£æ–‡ä»¶
â”œâ”€â”€ vite.config.ts          # Viteé…ç½®æ–‡ä»¶
â”œâ”€â”€ tsconfig.json           # TypeScripté…ç½®
â”œâ”€â”€ tsconfig.node.json      # TypeScript Nodeé…ç½®
â”œâ”€â”€ package.json            # é¡¹ç›®ä¾èµ–é…ç½®
â”œâ”€â”€ README.md               # æ¸¸æˆè¯´æ˜æ–‡æ¡£
â””â”€â”€ node_modules/           # ä¾èµ–åŒ…ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
```

---

## ğŸ“„ æ–‡ä»¶è¯¦ç»†è¯´æ˜

### 1. **package.json** - é¡¹ç›®ä¾èµ–å’Œè„šæœ¬é…ç½®

**ä½œç”¨**ï¼šå£°æ˜é¡¹ç›®çš„å…ƒä¿¡æ¯ã€ä¾èµ–åŒ…å’Œå¯è¿è¡Œçš„è„šæœ¬å‘½ä»¤

**å…³é”®å†…å®¹**ï¼š
```json
{
  "name": "game",                    // é¡¹ç›®åç§°
  "type": "module",                  // ä½¿ç”¨ES Moduleæ¨¡å—ç³»ç»Ÿ
  "scripts": {
    "dev": "vite",                   // å¼€å‘å‘½ä»¤ï¼šnpm run dev
    "build": "vite build",           // æ„å»ºå‘½ä»¤
    "preview": "vite preview"        // é¢„è§ˆæ„å»ºç»“æœ
  },
  "dependencies": {                  // ç”Ÿäº§ä¾èµ–
    "react": "^18.x",                // Reactæ¡†æ¶
    "react-dom": "^18.x"             // React DOMæ¸²æŸ“åº“
  },
  "devDependencies": {               // å¼€å‘ä¾èµ–
    "vite": "^7.3.1",                // æ‰“åŒ…å·¥å…·
    "@vitejs/plugin-react": "^5.1.3" // Vite Reactæ’ä»¶
  }
}
```

**ä½•æ—¶ä½¿ç”¨**ï¼š
- è¿è¡Œ `npm run dev` å¯åŠ¨å¼€å‘æœåŠ¡å™¨
- è¿è¡Œ `npm run build` æ„å»ºç”Ÿäº§ç‰ˆæœ¬
- æ·»åŠ æ–°ä¾èµ–æ—¶ä¿®æ”¹æ­¤æ–‡ä»¶

---

### 2. **index.html** - ç½‘é¡µå…¥å£

**ä½œç”¨**ï¼šä¸ºåº”ç”¨æä¾›HTMLåŸºç¡€æ¡†æ¶

**å…³é”®å†…å®¹**ï¼š
```html
<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>Grand Strategy Game</title>
  </head>
  <body>
    <div id="root"></div>              <!-- Reactåº”ç”¨ä¼šæŒ‚è½½åˆ°è¿™é‡Œ -->
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
```

**ä½œç”¨æœºåˆ¶**ï¼š
1. å®šä¹‰äº†ä¸€ä¸ªç©ºçš„ `<div id="root">` å®¹å™¨
2. å¼•å…¥ `main.tsx` ä½œä¸ºåº”ç”¨å…¥å£
3. Reactä¼šå°†æ•´ä¸ªåº”ç”¨æŒ‚è½½åˆ° `root` å…ƒç´ å†…

---

### 3. **vite.config.ts** - Viteæ‰“åŒ…å·¥å…·é…ç½®

**ä½œç”¨**ï¼šé…ç½®å¼€å‘æœåŠ¡å™¨ã€æ„å»ºå’Œæ’ä»¶

**å…³é”®å†…å®¹**ï¼š
```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],  // ä½¿ç”¨Reactæ’ä»¶å¤„ç†.jsx/.tsxæ–‡ä»¶
})
```

**ä½œç”¨**ï¼š
- å¯ç”¨Reactæ”¯æŒï¼Œä½¿Viteèƒ½ç†è§£JSX/TSXè¯­æ³•
- é…ç½®HMRï¼ˆçƒ­æ¨¡å—æ›¿æ¢ï¼‰ï¼Œå¼€å‘æ—¶å®æ—¶åˆ·æ–°
- å®šä¹‰æ‰“åŒ…è§„åˆ™

---

### 4. **tsconfig.json** å’Œ **tsconfig.node.json** - TypeScripté…ç½®

**ä½œç”¨**ï¼šé…ç½®TypeScriptç¼–è¯‘å™¨çš„è¡Œä¸º

**å…³é”®é…ç½®**ï¼š
```typescript
{
  "compilerOptions": {
    "target": "ES2020",              // ç¼–è¯‘ç›®æ ‡ï¼šES2020æ ‡å‡†
    "lib": ["ES2020", "DOM"],        // åŒ…å«ES2020å’ŒDOM APIç±»å‹
    "module": "ESNext",              // ä½¿ç”¨æœ€æ–°çš„æ¨¡å—ç³»ç»Ÿ
    "jsx": "react-jsx",              // å¯ç”¨React 17+ JSXè½¬æ¢
    "strict": true,                  // ä¸¥æ ¼æ¨¡å¼
    "noUnusedLocals": true,          // ç¦æ­¢æœªä½¿ç”¨çš„æœ¬åœ°å˜é‡
    "noUnusedParameters": true       // ç¦æ­¢æœªä½¿ç”¨çš„å‚æ•°
  }
}
```

---

### 5. **src/main.tsx** - åº”ç”¨å…¥å£ç‚¹

**ä½œç”¨**ï¼šåˆå§‹åŒ–Reactåº”ç”¨ï¼Œå°†Appç»„ä»¶æŒ‚è½½åˆ°DOM

**ä»£ç **ï¼š
```typescript
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App'

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
)
```

**æµç¨‹**ï¼š
1. å¯¼å…¥Reactå’ŒReactDOMåº“
2. å¯¼å…¥Appä¸»ç»„ä»¶
3. åˆ›å»ºReactæ ¹èŠ‚ç‚¹ï¼ŒæŒ‚è½½Appç»„ä»¶åˆ° `id="root"` çš„DOMå…ƒç´ 
4. `StrictMode` å¸®åŠ©è¯†åˆ«ä»£ç ä¸­çš„æ½œåœ¨é—®é¢˜

---

### 6. **src/types.ts** - æ ¸å¿ƒç±»å‹å®šä¹‰

**ä½œç”¨**ï¼šå®šä¹‰æ•´ä¸ªæ¸¸æˆç³»ç»Ÿçš„TypeScriptç±»å‹ï¼Œæ˜¯é¡¹ç›®çš„"æ•°æ®å¥‘çº¦"

**åŒ…å«çš„ä¸»è¦ç±»å‹**ï¼š

#### æšä¸¾ç±»å‹
```typescript
enum CommodityType {
  IRON = 'iron',           // é“çŸ¿
  COAL = 'coal',           // ç…¤ç‚­
  STEEL = 'steel',         // é’¢é“
  MACHINERY = 'machinery', // æœºå™¨
  FOOD = 'food',           // é£Ÿç‰©
  CONSUMER_GOODS = 'consumer_goods' // æ¶ˆè´¹å“
}

enum BuildingType {
  MINE = 'mine',                  // çŸ¿åœº
  FACTORY = 'factory',            // å·¥å‚
  MILITARY_BASE = 'military_base' // å†›äº‹åŸºåœ°
}

enum CommandType {
  BUILD = 'build',           // å»ºé€ å‘½ä»¤
  MOVE_ARMY = 'move_army',   // ç§»åŠ¨å†›é˜Ÿ
  START_FOCUS = 'start_focus', // å¯åŠ¨å›½ç­–
  TRADE = 'trade'            // è´¸æ˜“
}
```

#### æ•°æ®ç»“æ„
```typescript
// èµ„æºç±»å‹
Resources {
  money: number              // é‡‘é’±
  manpower: number           // äººåŠ›
  politicalPower: number     // æ”¿æ²»ç‚¹æ•°
  commodities: Map<CommodityType, number> // å•†å“åº“å­˜
}

// å›½å®¶
Country {
  id: string
  name: string
  color: string              // åœ°å›¾ä¸Šçš„æ˜¾ç¤ºé¢œè‰²
  resources: Resources       // å›½å®¶èµ„æº
  provinces: string[]        // æ‹¥æœ‰çš„çœä»½ID
  armies: Army[]             // æ‹¥æœ‰çš„å†›é˜Ÿ
  buildings: Building[]      // æ‹¥æœ‰çš„å»ºç­‘
  activeFocus: string | null // å½“å‰è¿›è¡Œçš„å›½ç­–
}

// å†›é˜Ÿ
Army {
  id: string
  name: string
  size: number               // å†›é˜Ÿè§„æ¨¡ï¼ˆäººæ•°ï¼‰
  position: Position         // å½“å‰ä½ç½®
  targetPosition: Position | null // ç›®æ ‡ä½ç½®
  movementSpeed: number      // ç§»åŠ¨é€Ÿåº¦
}

// å»ºç­‘
Building {
  id: string
  type: BuildingType
  provinceId: string
  constructionProgress: number // å»ºé€ è¿›åº¦ï¼ˆ0-100ï¼‰
  isComplete: boolean
  input: Partial<Record<CommodityType, number>>  // æ¶ˆè€—çš„èµ„æº
  output: Partial<Record<CommodityType, number>> // äº§å‡ºçš„èµ„æº
}
```

**é‡è¦æ€§**ï¼š
- ä¸ºå¼€å‘æä¾›ç±»å‹å®‰å…¨
- é¿å…è¿è¡Œæ—¶ç±»å‹é”™è¯¯
- æä¾›IDEè‡ªåŠ¨è¡¥å…¨

---

### 7. **src/gameData.ts** - æ¸¸æˆåˆå§‹åŒ–æ•°æ®

**ä½œç”¨**ï¼šåˆ›å»ºæ¸¸æˆåˆå§‹çŠ¶æ€ï¼ŒåŒ…æ‹¬æ‰€æœ‰åˆå§‹æ•°æ®

**ä¸»è¦å‡½æ•°**ï¼š

#### 1ï¸âƒ£ `createInitialMarket()`
åˆ›å»ºå…¨çƒå¸‚åœºï¼ŒåŒ…å«6ç§å•†å“åŠå…¶åˆå§‹ä¿¡æ¯ï¼š
```typescript
{
  type: CommodityType.IRON,  // å•†å“ç±»å‹
  name: 'é“çŸ¿',              // æ˜¾ç¤ºåç§°
  basePrice: 10,             // åŸºç¡€ä»·æ ¼
  currentPrice: 10,          // å½“å‰ä»·æ ¼
  supply: 1000,              // å…¨çƒä¾›åº”é‡
  demand: 800                // å…¨çƒéœ€æ±‚é‡
}
```

#### 2ï¸âƒ£ `createInitialFocuses()`
åˆ›å»ºå›½ç­–æ ‘ï¼ŒåŒ…å«4ä¸ªå¯é€‰çš„å›½ç­–ï¼š
- å·¥ä¸šæ‰©å¼  (70å¤©)
- å†›äº‹å»ºè®¾ (50å¤©)
- èµ„æºå¼€é‡‡ (60å¤©)
- è‡ªç”±è´¸æ˜“ (40å¤©ï¼Œéœ€è¦å‰ç½®æ¡ä»¶)

#### 3ï¸âƒ£ `createInitialProvinces()`
åˆ›å»ºåœ°å›¾ä¸Šçš„5ä¸ªçœä»½ï¼Œå®šä¹‰ï¼š
- ä½ç½®åæ ‡
- æ‰€å±å›½å®¶
- è‡ªç„¶èµ„æº

#### 4ï¸âƒ£ `createInitialCountries()`
åˆ›å»º2ä¸ªå›½å®¶ï¼š
- **ç©å®¶å›½å®¶**ï¼ˆè“è‰²ï¼ŒID: 'player'ï¼‰
  - æ‹¥æœ‰4ä¸ªçœä»½
  - åˆå§‹èµ„æºï¼šÂ¥10000, äººåŠ›100000, æ”¿æ²»ç‚¹æ•°100
- **AIå›½å®¶**ï¼ˆçº¢è‰²ï¼ŒID: 'ai1'ï¼‰
  - æ‹¥æœ‰1ä¸ªçœä»½
  - åˆå§‹èµ„æºè¾ƒå°‘

#### 5ï¸âƒ£ `createInitialGameState()`
æ•´åˆæ‰€æœ‰åˆå§‹æ•°æ®ï¼Œè¿”å›å®Œæ•´çš„ `GameState` å¯¹è±¡

**è°ƒç”¨æ—¶æœº**ï¼šåœ¨ `App.tsx` ä¸­åˆå§‹åŒ–æ¸¸æˆæ—¶è°ƒç”¨ä¸€æ¬¡

---

### 8. **src/gameEngine.ts** - æ¸¸æˆå¼•æ“æ ¸å¿ƒé€»è¾‘

**ä½œç”¨**ï¼šå¤„ç†æ‰€æœ‰æ¸¸æˆé€»è¾‘ï¼Œæ˜¯æ¸¸æˆçš„"å¤§è„‘"

**æ ¸å¿ƒç±»ï¼šGameEngine**

#### å…³é”®æ–¹æ³•ï¼š

##### 1ï¸âƒ£ `updateGameState(state: GameState): GameState`
**æ¯ä¸ªæ¸¸æˆæ—¥è°ƒç”¨ä¸€æ¬¡**ï¼Œå¤„ç†ï¼š
- æ‰§è¡Œå‘½ä»¤é˜Ÿåˆ—ä¸­åˆ°æœŸçš„å‘½ä»¤
- æ›´æ–°å»ºç­‘å»ºé€ è¿›åº¦
- æ›´æ–°å›½ç­–è¿›åº¦
- æ›´æ–°å†›é˜Ÿä½ç½®
- è°ƒæ•´å¸‚åœºä»·æ ¼
- å¤„ç†å»ºç­‘äº§å‡º
- å¢åŠ æ”¿æ²»ç‚¹æ•°

```typescript
// æ‰§è¡Œæµç¨‹
executeQueue()        // æ‰§è¡Œåˆ°æœŸå‘½ä»¤
  â†“
updateBuildings()     // æ›´æ–°å»ºç­‘
  â†“
updateFocuses()       // æ›´æ–°å›½ç­–å’Œåº”ç”¨æ•ˆæœ
  â†“
updateArmies()        // æ›´æ–°å†›é˜Ÿç§»åŠ¨
  â†“
updateMarket()        // è°ƒæ•´å•†å“ä»·æ ¼
  â†“
processBuildingProduction()  // å»ºç­‘äº§å‡º
```

##### 2ï¸âƒ£ `executeCommand(state, command): GameState`
æ‰§è¡Œå•ä¸ªå‘½ä»¤ï¼Œæ ¹æ®å‘½ä»¤ç±»å‹è°ƒç”¨ä¸åŒçš„å¤„ç†å‡½æ•°ï¼š
```typescript
switch (command.type) {
  case CommandType.BUILD:        // å»ºé€ å»ºç­‘
  case CommandType.MOVE_ARMY:    // ç§»åŠ¨å†›é˜Ÿ
  case CommandType.START_FOCUS:  // å¯åŠ¨å›½ç­–
  case CommandType.TRADE:        // è´¸æ˜“
}
```

##### 3ï¸âƒ£ `executeBuildCommand()`
**å»ºé€ å»ºç­‘æµç¨‹**ï¼š
1. æ£€æŸ¥èµ„æºæ˜¯å¦å……è¶³
2. æ‰£é™¤èµ„æº
3. åˆ›å»ºBuildingå¯¹è±¡æ·»åŠ åˆ°å›½å®¶
4. å»ºç­‘ä¼šåœ¨åç»­æ›´æ–°ä¸­é€æ­¥å®Œæˆ

##### 4ï¸âƒ£ `executeStartFocusCommand()`
**å¯åŠ¨å›½ç­–æµç¨‹**ï¼š
1. æ£€æŸ¥å‰ç½®æ¡ä»¶æ˜¯å¦æ»¡è¶³
2. æ£€æŸ¥æ˜¯å¦æœ‰è¶³å¤Ÿæ”¿æ²»ç‚¹æ•°ï¼ˆ50ï¼‰
3. è®¾ç½®ä¸ºæ´»è·ƒå›½ç­–
4. åç»­æ›´æ–°ä¼šæ¨è¿›è¿›åº¦

##### 5ï¸âƒ£ `updateMarket()`
**å¸‚åœºä»·æ ¼è°ƒæ•´ç®—æ³•**ï¼š
```
ä¾›éœ€æ¯” = ä¾›åº”é‡ / éœ€æ±‚é‡

å¦‚æœ ä¾›éœ€æ¯” > 1.2:     // ä¾›è¿‡äºæ±‚
  ä»·æ ¼ä¸‹é™ 2%

å¦‚æœ ä¾›éœ€æ¯” < 0.8:     // ä¾›ä¸åº”æ±‚
  ä»·æ ¼ä¸Šæ¶¨ 2%

ä»·æ ¼èŒƒå›´é™åˆ¶ï¼š
  æœ€ä½ = åŸºç¡€ä»·æ ¼ Ã— 50%
  æœ€é«˜ = åŸºç¡€ä»·æ ¼ Ã— 300%
```

##### 6ï¸âƒ£ `processBuildingProduction()`
**ç”Ÿäº§æµç¨‹**ï¼ˆæ¯æ—¥æ‰§è¡Œï¼‰ï¼š
```
å¯¹äºæ¯ä¸ªå®Œæˆçš„å»ºç­‘:
  å¦‚æœè¾“å…¥èµ„æºå……è¶³:
    æ‰£é™¤è¾“å…¥èµ„æº
    å¢åŠ è¾“å‡ºèµ„æº
  å¦åˆ™:
    æ— æ³•ç”Ÿäº§
```

**ç¤ºä¾‹**ï¼š
```typescript
çŸ¿åœº:
  è¾“å…¥ï¼š1ç…¤ç‚­/å¤©
  è¾“å‡ºï¼š5é“çŸ¿/å¤©
  
å·¥å‚:
  è¾“å…¥ï¼š2é“çŸ¿ + 1ç…¤ç‚­/å¤©
  è¾“å‡ºï¼š3é’¢é“/å¤©
```

##### 7ï¸âƒ£ `updateArmies()`
**å†›é˜Ÿç§»åŠ¨é€»è¾‘**ï¼š
```
å¦‚æœæœ‰ç›®æ ‡ä½ç½®:
  è®¡ç®—å½“å‰ä½ç½®åˆ°ç›®æ ‡çš„è·ç¦»
  
  å¦‚æœè·ç¦» < ç§»åŠ¨é€Ÿåº¦:
    åˆ°è¾¾ç›®æ ‡ï¼Œæ¸…é™¤ç›®æ ‡
  å¦åˆ™:
    å‘ç›®æ ‡æ–¹å‘ç§»åŠ¨
```

#### è¾…åŠ©æ–¹æ³•
```typescript
getBuildingCosts()           // è·å–å»ºç­‘æˆæœ¬
getBuildingConstructionTime() // è·å–å»ºç­‘å»ºé€ æ—¶é—´
getBuildingInput/Output()     // è·å–å»ºç­‘çš„è¾“å…¥/è¾“å‡º
canAfford()                   // æ£€æŸ¥æ˜¯å¦èƒ½æ‰¿æ‹…æˆæœ¬
deductResources()             // æ‰£é™¤èµ„æº
```

---

### 9. **src/App.tsx** - ä¸»åº”ç”¨ç»„ä»¶

**ä½œç”¨**ï¼šReactä¸»ç»„ä»¶ï¼Œè´Ÿè´£æ•´ä¸ªUIçš„æ¸²æŸ“å’Œç”¨æˆ·äº¤äº’

**ç»“æ„**ï¼š
```typescript
function App() {
  // çŠ¶æ€ç®¡ç†
  const [gameState, setGameState] = useState(createInitialGameState())
  const [selectedProvince, setSelectedProvince] = useState<string | null>(null)
  const [showBuildMenu, setShowBuildMenu] = useState(false)
  // ... å…¶ä»–çŠ¶æ€

  // æ¸¸æˆå¾ªç¯ï¼ˆuseEffectï¼‰
  useEffect(() => {
    if (!gameState.isPlaying) return
    // æ¯æ¬¡é—´éš”è°ƒç”¨ GameEngine.updateGameState()
  }, [gameState.isPlaying, gameState.speed])

  // äº‹ä»¶å¤„ç†å‡½æ•°
  const togglePlaying = () => { /* æš‚åœ/ç»§ç»­ */ }
  const changeSpeed = () => { /* æ”¹å˜æ¸¸æˆé€Ÿåº¦ */ }
  const addCommand = () => { /* æ·»åŠ å‘½ä»¤åˆ°é˜Ÿåˆ— */ }
  const buildBuilding = () => { /* å»ºé€ å»ºç­‘ */ }
  const startFocus = () => { /* å¯åŠ¨å›½ç­– */ }
  const moveArmy = () => { /* ç§»åŠ¨å†›é˜Ÿ */ }

  // æ¸²æŸ“UI
  return <div className="app">...</div>
}
```

**ä¸»è¦UIæ¨¡å—**ï¼š

#### 1ï¸âƒ£ **é¡¶éƒ¨æ **ï¼ˆTopBarï¼‰
```
[æ—¶é—´æ˜¾ç¤º] [æš‚åœ/ç»§ç»­] [é€Ÿåº¦é€‰æ‹©] | [é‡‘é’±] [äººåŠ›] [æ”¿æ²»ç‚¹æ•°]
```

#### 2ï¸âƒ£ **å·¦ä¾§é¢æ¿**ï¼ˆLeftPanelï¼‰
- **å›½ç­–æ ‘**ï¼šæ˜¾ç¤ºæ‰€æœ‰å›½ç­–ï¼Œå¯ç‚¹å‡»å¯åŠ¨
- **å»ºç­‘åˆ—è¡¨**ï¼šæ˜¾ç¤ºæ­£åœ¨å»ºé€ å’Œå·²å®Œæˆçš„å»ºç­‘

#### 3ï¸âƒ£ **ä¸­é—´åŒºåŸŸ**ï¼ˆMapContainerï¼‰
- **çœä»½**ï¼šåœ†å½¢åŒºåŸŸï¼Œé¢œè‰²ä»£è¡¨æ‰€å±å›½å®¶
- **å†›é˜Ÿ**ï¼šå°æ–¹å—ï¼Œå¯ç‚¹å‡»é€‰ä¸­å’Œç§»åŠ¨

#### 4ï¸âƒ£ **å³ä¾§é¢æ¿**ï¼ˆRightPanelï¼‰
- **å…¨çƒå¸‚åœº**ï¼šæ˜¾ç¤ºæ‰€æœ‰å•†å“çš„ä»·æ ¼ã€ä¾›éœ€ã€ä¹°å–æŒ‰é’®
- **åº“å­˜**ï¼šæ˜¾ç¤ºå›½å®¶æ‹¥æœ‰çš„å•†å“æ•°é‡
- **å‘½ä»¤é˜Ÿåˆ—**ï¼šæ˜¾ç¤ºå¾…æ‰§è¡Œçš„å‘½ä»¤

#### 5ï¸âƒ£ **æ¨¡æ€æ¡†**ï¼ˆModalï¼‰
- **å»ºé€ èœå•**ï¼šé€‰æ‹©å»ºç­‘ç±»å‹å¹¶ç¡®è®¤å»ºé€ 

**ç”¨æˆ·äº¤äº’æµç¨‹**ï¼š
```
ç”¨æˆ·ç‚¹å‡»                          
  â†“
è§¦å‘Reactäº‹ä»¶å¤„ç†å‡½æ•°
  â†“
ç”ŸæˆCommandå¯¹è±¡
  â†“
è°ƒç”¨ addCommand() æ·»åŠ åˆ°é˜Ÿåˆ—
  â†“
ç­‰å¾…æ—¶é—´æ¨è¿›
  â†“
GameEngine æ‰§è¡Œå‘½ä»¤
  â†“
GameState æ›´æ–°
  â†“
React é‡æ–°æ¸²æŸ“ç»„ä»¶
```

---

### 10. **src/App.css** - åº”ç”¨æ ·å¼

**ä½œç”¨**ï¼šå®šä¹‰æ•´ä¸ªåº”ç”¨çš„è§†è§‰æ ·å¼

**ä¸»è¦æ ·å¼æ¨¡å—**ï¼š

#### å¸ƒå±€
```css
.app                 /* ä¸»å®¹å™¨ - flexåˆ—å¸ƒå±€ */
.top-bar            /* é¡¶éƒ¨æ  */
.main-content       /* ä¸»å†…å®¹åŒº - flexè¡Œå¸ƒå±€ */
.left-panel         /* å·¦ä¾§é¢æ¿ */
.center-content     /* ä¸­é—´å†…å®¹ */
.right-panel        /* å³ä¾§é¢æ¿ */
.map-container      /* åœ°å›¾å®¹å™¨ */
```

#### ç»„ä»¶
```css
.province           /* çœä»½æ ·å¼ */
.army               /* å†›é˜Ÿæ ·å¼ */
.panel-section      /* é¢æ¿åŒºå— */
.focus-item         /* å›½ç­–é¡¹ç›® */
.building-item      /* å»ºç­‘é¡¹ç›® */
.commodity-item     /* å•†å“é¡¹ç›® */
.modal              /* æ¨¡æ€æ¡† */
```

#### ä¸»é¢˜é…è‰²
```
èƒŒæ™¯è‰²ï¼š    #1a1a1a (æ·±ç°)
å¡ç‰‡è‰²ï¼š    #2a2a2a (ç°)
å¼ºè°ƒè‰²ï¼š    #ffd700 (é‡‘è‰²) - æ ‡é¢˜ã€é‡è¦ä¿¡æ¯
è“è‰²ï¼š      #4169E1 - ç©å®¶æ–¹ã€æŒ‰é’®
çº¢è‰²ï¼š      #DC143C - AIæ–¹ã€å±é™©æ“ä½œ
ç»¿è‰²ï¼š      #228B22 - å®ŒæˆçŠ¶æ€
```

#### äº¤äº’åé¦ˆ
```css
button:hover        /* æŒ‰é’®æ‚¬åœæ—¶å˜äº® */
.province:hover     /* çœä»½æ‚¬åœæ—¶æ”¾å¤§ */
.focus-item:hover   /* å›½ç­–æ‚¬åœæ—¶å˜è‰² */
input/select        /* è¾“å…¥æ¡†æ ·å¼ */
```

---

### 11. **README.md** - é¡¹ç›®æ–‡æ¡£

**ä½œç”¨**ï¼šä¸ºç”¨æˆ·æä¾›æ¸¸æˆè¯´æ˜ã€å®‰è£…æŒ‡å—ã€ç©æ³•æ•™ç¨‹

**åŒ…å«å†…å®¹**ï¼š
- æ¸¸æˆç‰¹è‰²ä»‹ç»
- å®‰è£…å’Œè¿è¡Œæ­¥éª¤
- UIç•Œé¢è¯´æ˜
- æ¸¸æˆç©æ³•æ•™ç¨‹
- æœºåˆ¶è¯¦è§£è¡¨æ ¼
- æŠ€æœ¯æ ˆè¯´æ˜
- å¯æ‰©å±•åŠŸèƒ½åˆ—è¡¨

---

## ğŸ”„ æ•°æ®æµå‘å›¾

```
ç”¨æˆ·æ“ä½œ
  â†“
App.tsx äº‹ä»¶å¤„ç†å‡½æ•°
  â†“
ç”Ÿæˆ Command å¯¹è±¡
  â†“
æ·»åŠ åˆ° GameState.commandQueue
  â†“
[æ¸¸æˆæ—¶é—´æ¨è¿›]
  â†“
GameEngine.updateGameState()
  â†“
æ‰§è¡Œåˆ°æœŸå‘½ä»¤ â†’ å¤„ç†å„ç§æ¸¸æˆé€»è¾‘ â†’ æ›´æ–° GameState
  â†“
React ç›‘å¬åˆ° GameState å˜åŒ–
  â†“
é‡æ–°æ¸²æŸ“ App ç»„ä»¶
  â†“
ç”¨æˆ·çœ‹åˆ°ç•Œé¢æ›´æ–°
```

---

## ğŸ“Š æ¸¸æˆæ›´æ–°å¾ªç¯

```
å¼€å§‹æ¸¸æˆ (isPlaying = true)
  â†“
æ¯ 1000/speed æ¯«ç§’è§¦å‘ä¸€æ¬¡ï¼š
  â†“
GameEngine.updateGameState() {
  1. æ‰§è¡Œåˆ°æœŸçš„å‘½ä»¤
  2. æ›´æ–°æ‰€æœ‰å»ºç­‘è¿›åº¦
  3. æ›´æ–°å›½ç­–è¿›åº¦ & åº”ç”¨æ•ˆæœ
  4. æ›´æ–°å†›é˜Ÿä½ç½®
  5. è°ƒæ•´å¸‚åœºä»·æ ¼
  6. å»ºç­‘ç”Ÿäº§
  7. å¢åŠ æ”¿æ²»ç‚¹æ•°
}
  â†“
currentDate += 1
  â†“
setGameState(newState)  // è§¦å‘Reacté‡æ–°æ¸²æŸ“
  â†“
æ˜¾ç¤ºæ›´æ–°åçš„æ¸¸æˆç”»é¢
```

---

## ğŸ¯ æ–‡ä»¶é—´çš„ä¾èµ–å…³ç³»

```
main.tsx (å…¥å£)
  â†“
App.tsx (ä¸»ç»„ä»¶)
  â”œâ†’ types.ts (ç±»å‹å®šä¹‰)
  â”œâ†’ gameData.ts (åˆå§‹åŒ–æ•°æ®)
  â”œâ†’ gameEngine.ts (æ¸¸æˆé€»è¾‘)
  â”‚  â””â†’ types.ts (ä½¿ç”¨ç±»å‹)
  â””â†’ App.css (æ ·å¼)

package.json (é…ç½®)
  â†“
vite.config.ts (æ‰“åŒ…é…ç½®)
tsconfig.json (TSé…ç½®)
```

---

## ğŸš€ å¿«é€Ÿå‚è€ƒ

| æ–‡ä»¶ | æ”¹åŠ¨é¢‘ç‡ | ä¸»è¦ç”¨é€” |
|------|---------|--------|
| `App.tsx` | é«˜ | æ·»åŠ UIåŠŸèƒ½ã€ä¿®æ”¹ç•Œé¢ |
| `gameEngine.ts` | é«˜ | è°ƒæ•´æ¸¸æˆé€»è¾‘ã€å¹³è¡¡åº¦ |
| `types.ts` | ä¸­ | æ·»åŠ æ–°æ•°æ®ç»“æ„ |
| `gameData.ts` | ä¸­ | ä¿®æ”¹åˆå§‹æ•°æ®ã€ç”Ÿæˆå‚æ•° |
| `App.css` | ä½ | æ”¹è¿›è§†è§‰æ•ˆæœ |
| `vite.config.ts` | ä½ | ä¿®æ”¹æ„å»ºé…ç½® |
| `package.json` | ä½ | æ·»åŠ æ–°ä¾èµ– |
| `index.html` | å¾ˆä½ | åŸºæœ¬ä¸éœ€è¦ä¿®æ”¹ |

---

è¿™å°±æ˜¯æ•´ä¸ªgameé¡¹ç›®çš„å®Œæ•´è¯´æ˜ï¼å¦‚æœå¯¹æŸä¸ªæ–‡ä»¶æœ‰æ›´æ·±å…¥çš„é—®é¢˜ï¼Œå¯ä»¥ç»§ç»­æé—®ã€‚
